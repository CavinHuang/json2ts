var Z=(o,l)=>()=>(l||o((l={exports:{}}).exports,l),l.exports);var x=Z(g=>{(function(o,l){if(typeof define=="function"&&define.amd)define(["exports"],l);else if(typeof g<"u")l(g);else{var y={exports:{}};l(y.exports),o.unknown=y.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:g,function(o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.compile=H;function l(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function y(e,r){for(var u=0;u<r.length;u++){var n=r[u];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,r,u){return r&&y(e.prototype,r),u&&y(e,u),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,r,u){return r in e?Object.defineProperty(e,r,{value:u,enumerable:!0,configurable:!0,writable:!0}):e[r]=u,e}function p(e){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},p(e)}var R="Root",V="string",b="number",E="Object",T="Array",N="root",c="$ARRAY_ITEM$",P="$COMMENT_KEY$",Y="$LAST_COMMENT$",d="$NEXT_COMMENT$";function h(e){var r=e.offset,u=e.column,n=e.line;return{offset:r,column:u,line:n}}function O(e,r,u){return u=u||h(e),{start:r,end:u,source:e.originalSource.slice(r.offset,u.offset)}}function $(e,r){return{options:r,column:1,line:1,offset:0,originalSource:e,source:e}}function K(e){return{key:N,type:R,value:e}}function _(e){return!e.source}function j(e,r){for(var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:r.length,n=0,i=-1,a=0;a<u;a++)r.charCodeAt(a)===10&&(n++,i=a);e.offset+=u,e.line+=n,e.column=i===-1?e.column+u:u-i}function t(e,r){var u=e.source;j(e,u,r),e.source=u.slice(r)}function f(e){var r=/^[\t\r\n\f ]+/.exec(e.source);r&&r[0]&&t(e,r[0].length)}function A(e,r){f(e);var u=h(e),n=r||G(e),i=L(e),a=i.value,s=i.type,Q=O(e,u);return f(e),e.source[0]===","&&(t(e,1),f(e)),{key:n,value:a,type:s,loc:Q}}function k(e){for(var r=[];!_(e);){f(e);var u=e.source;if(u[0]==="{")t(e,1);else{if(u[0]==="}")return t(e,1),f(e),r;if(u[0]==="/")if(u[1]==="/"){var n=r[r.length-1],i=-1;n&&(i=n.loc.end.line);var a=h(e).line;r.push(X(e,a===i)),f(e)}else throw new Error("\u9519\u8BEF\u7684\u5907\u6CE8");else r.push(A(e))}}return r}function G(e){var r=e.source[0],u=[];return r==='"'?u=/^"(.[^"]*)/i.exec(e.source):r==="'"?u=/^'(.[^']*)/i.exec(e.source):(u=/(.[^:]*)/i.exec(e.source),u[1]=u[1].trim()),t(e,u[0].length+1),f(e),e.source[0]===":"&&(t(e,1),f(e)),u[1]}function B(e){var r=/^([0-9]*)/i.exec(e.source);return t(e,r[0].length),r[1]}function I(e){var r=/^["|']([^"|']*)/i.exec(e.source);return t(e,r[0].length+1),r[1]}function L(e){var r=null,u=null,n=e.source[0];return/^[0-9]/.test(n)?(r=B(e),u=b):n==='"'||n==="'"?(r=I(e),u=V):n==="["?(t(e,1),r=q(e),u=T):n==="{"&&(r=k(e),u=E),{value:r,type:u}}function q(e){for(var r=[];!_(e);)if(r.push(A(e,c)),e.source[0]==="]")return t(e,1),r;return r}function X(e,r){var u=/^\/\/\s*(.[^\t\n\r\f]*)/i.exec(e.source),n=h(e),i=u[1],a=r?Y:d;return t(e,u[0].length),{key:a,value:i,type:P,loc:O(e,n)}}function D(e,r){var u=$(e,r);return K(k(u))}function M(e){return Object.prototype.toString.call(e)}function m(e){return p(e)==="object"&&M(e).slice(8,-1)==="Array"}function C(e){return p(e)==="object"&&M(e).slice(8,-1)==="Object"}function S(e,r,u){e.forEach(function(n){var i=u[n.type];i&&i.entry&&i.entry(n,r),m(n.value)&&S(n.value,n,u),i&&i.exit&&i.exit(n,r)})}function F(e,r){var u=r.Root;return u&&u.entry&&u.entry(e,null),S(e.value,e,r),u&&u.exit&&u.exit(e,null),e}function J(e,r){var u;return F(e,(u={},v(u,V,{entry:function(i,a){i.key===c?(a.typeValue=a.typeValue||[],a.typeValue.push(i.type)):(a.typeValue=a.typeValue||{},a.typeValue[i.key]=i.type)}}),v(u,b,{entry:function(i,a){i.key===c?(a.typeValue=a.typeValue||[],a.typeValue.push(i.type)):(a.typeValue=a.typeValue||{},a.typeValue[i.key]=i.type)}}),v(u,E,{entry:function(i,a){i.key===c?(a.typeValue=a.typeValue||[],i.typeValue={},a.typeValue.push(i.typeValue)):(a.typeValue=a.typeValue||{},a.typeValue[i.key]=i.typeValue={})}}),v(u,T,{entry:function(i,a){i.key===c?(a.typeValue=a.typeValue||[],i.typeValue=[],a.typeValue.push(i.typeValue)):(a.typeValue=a.typeValue||{},a.typeValue[i.key]=i.typeValue=[])}}),u)),e}var U=function(){function e(r,u){l(this,e),this.ast=r,this.options=u}return w(e,[{key:"beginGen",value:function(){var u=this.ast.typeValue,n="";return n+="{",n+=this.gen(u),n+="}",console.log(n),n}},{key:"gen",value:function(u){var n="";for(var i in u){var a=u[i];n+=this.genKey(i),C(a)?n+=this.gen(a):m(a)?n+=this.options.parseArray?this.genArray(a):"Array<any>":n+=a,this.options.semicolon&&(n+=";")}return n}},{key:"genKey",value:function(u){return"".concat(u).concat(this.options.required?":":"?:")}},{key:"genArray",value:function(u){var n=this,i="",a=new Set;u.forEach(function(s){m(s)&&(i+=n.genArray(s)),C(s)?i+=n.gen(s):a.add(s)})}}]),e}();function W(e,r){return new U(e,r).beginGen()}function z(e){var r={spiltType:!0,parseArray:!0,required:!0,semicolon:!1};return Object.assign(r,e),r}function H(e,r){var u=z(r),n=D(e,u);return J(n),W(n,u)}})});export default x();
