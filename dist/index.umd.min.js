var x=(l,f)=>()=>(f||l((f={exports:{}}).exports,f),f.exports);var ee=x(m=>{(function(l,f){if(typeof define=="function"&&define.amd)define(["exports"],f);else if(typeof m<"u")f(m);else{var c={exports:{}};f(c.exports),l.unknown=c.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:m,function(l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.json2ts=l.default=Z,l.parse=M,l.traverser=j;function f(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function c(e,r){for(var n=0;n<r.length;n++){var u=r[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}function R(e,r,n){return r&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function h(e){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},h(e)}var w="Root",V="string",T="number",E="Object",O="Array",P="root",v="$ARRAY_ITEM$",Y="$COMMENT_KEY$",$="$LAST_COMMENT$",K="$NEXT_COMMENT$";function g(e){var r=e.offset,n=e.column,u=e.line;return{offset:r,column:n,line:u}}function A(e,r,n){return n=n||g(e),{start:r,end:n,source:e.originalSource.slice(r.offset,n.offset)}}function G(e,r){return{options:r,column:1,line:1,offset:0,originalSource:e,source:e}}function B(e){return{key:P,type:w,value:e}}function _(e){return!e.source}function I(e,r){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:r.length,u=0,i=-1,t=0;t<n;t++)r.charCodeAt(t)===10&&(u++,i=t);e.offset+=n,e.line+=u,e.column=i===-1?e.column+n:n-i}function a(e,r){var n=e.source;I(e,n,r),e.source=n.slice(r)}function o(e){var r=/^[\t\r\n\f ]+/.exec(e.source);r&&r[0]&&a(e,r[0].length)}function C(e,r){o(e);var n=g(e),u=r||L(e),i=U(e),t=i.value,s=i.type,y=A(e,n);return o(e),e.source[0]===","&&(a(e,1),o(e)),{key:u,value:t,type:s,loc:y}}function d(e){for(var r=[];!_(e);){o(e);var n=e.source;if(n[0]==="{")a(e,1);else{if(n[0]==="}")return a(e,1),o(e),r;if(n[0]==="/")if(n[1]==="/"){var u=r[r.length-1],i=-1;u&&(i=u.loc.end.line);var t=g(e).line;r.push(z(e,t===i)),o(e)}else throw new Error("\u9519\u8BEF\u7684\u5907\u6CE8");else r.push(C(e))}}return r}function L(e){var r=e.source[0],n=[];return r==='"'?n=/^"(.[^"]*)/i.exec(e.source):r==="'"?n=/^'(.[^']*)/i.exec(e.source):(n=/(.[^:]*)/i.exec(e.source),n[1]=n[1].trim()),a(e,n[0].length+1),o(e),e.source[0]===":"&&(a(e,1),o(e)),n[1]}function q(e){var r=/^([0-9]*)/i.exec(e.source);return a(e,r[0].length),r[1]}function F(e){var r=/^["|']([^"|']*)/i.exec(e.source);return a(e,r[0].length+1),r[1]}function U(e){var r=null,n=null,u=e.source[0];return/^[0-9]/.test(u)?(r=q(e),n=T):u==='"'||u==="'"?(r=F(e),n=V):u==="["?(a(e,1),r=X(e),n=O):u==="{"&&(r=d(e),n=E),{value:r,type:n}}function X(e){for(var r=[];!_(e);)if(r.push(C(e,v)),e.source[0]==="]")return a(e,1),r;return r}function z(e,r){var n=/^\/\/\s*(.[^\t\n\r\f]*)/i.exec(e.source),u=g(e),i=n[1],t=r?$:K;return a(e,n[0].length),{key:t,value:i,type:Y,loc:A(e,u)}}function M(e,r){var n=G(e,r);return B(d(n))}function k(e){return Object.prototype.toString.call(e)}function b(e){return h(e)==="object"&&k(e).slice(8,-1)==="Array"}function N(e){return h(e)==="object"&&k(e).slice(8,-1)==="Object"}function D(e){return e.replace(/( |^)[a-z]/g,function(r){return r.toUpperCase()})}function S(e,r,n){e.forEach(function(u){var i=n[u.type];i&&i.entry&&i.entry(u,r),b(u.value)&&S(u.value,u,n),i&&i.exit&&i.exit(u,r)})}function j(e,r){var n=r.Root;return n&&n.entry&&n.entry(e,null),S(e.value,e,r),n&&n.exit&&n.exit(e,null),e}function J(e,r){var n;return j(e,(n={},p(n,V,{entry:function(i,t){i.key===v?(t.typeValue=t.typeValue||[],t.typeValue.push(i.type)):(t.typeValue=t.typeValue||{},t.typeValue[i.key]=i.type)}}),p(n,T,{entry:function(i,t){i.key===v?(t.typeValue=t.typeValue||[],t.typeValue.push(i.type)):(t.typeValue=t.typeValue||{},t.typeValue[i.key]=i.type)}}),p(n,E,{entry:function(i,t){i.key===v?(t.typeValue=t.typeValue||[],i.typeValue={},t.typeValue.push(i.typeValue)):(t.typeValue=t.typeValue||{},t.typeValue[i.key]=i.typeValue={})}}),p(n,O,{entry:function(i,t){i.key===v?(t.typeValue=t.typeValue||[],i.typeValue=[],t.typeValue.push(i.typeValue)):(t.typeValue=t.typeValue||{},t.typeValue[i.key]=i.typeValue=[])}}),n)),e}var W=function(){function e(r,n){f(this,e),this.ast=r,this.options=n,this.prefix=n.typePrefix||"",this.suffix=n.typeSuffix||"Type",this.vars="",this.i=-1}return R(e,[{key:"beginGen",value:function(){var n=this.genName("Result"),u=this.ast.typeValue,i=this.gen(u);return"".concat(this.vars,"type ").concat(n," = ").concat(i)}},{key:"gen",value:function(n){var u=`{
`;for(var i in n){var t=n[i];u+=this.genKey(i),N(t)?u+=this.genObjcet(i,t):b(t)?u+=this.options.parseArray?this.genArray(i,t):"Array<any>":u+=t,this.options.semicolon&&(u+=";"),u+=`
`}return u+="}",u}},{key:"genName",value:function(n){return this.i++,"".concat(this.prefix).concat(D(n),"$").concat(this.i).concat(this.suffix)}},{key:"genKey",value:function(n){return"".concat(n).concat(this.options.required?": ":"?: ")}},{key:"genObjcet",value:function(n,u){var i="",t=this.gen(u);if(this.options.spiltType){var s=this.genName(n);this.vars+="type ".concat(s," = ").concat(t,`;
`),i+=s}else i+=t;return i}},{key:"genArray",value:function(n,u){var i=this,t="Array< ",s=new Set;return u.forEach(function(y){b(y)&&s.add(i.genArray(n,y)),N(y)?s.add(i.genObjcet(n,y)):s.add(y)}),t+=Array.from(s).join(" | "),t+=" >",t}}]),e}();function H(e,r){return new W(e,r).beginGen()}function Q(e){var r={spiltType:!0,parseArray:!1,required:!0,semicolon:!1};return Object.assign(r,e),r}function Z(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Q(r),u=M(e,n);return J(u),H(u,n)}})});export default ee();
